{% extends 'base.html' %}


{% block content %}

{% include 'navbar.html' %} <br>


		<div class="container">
			
	  <div class="row align-items-start">
	    <div class="col">
	    	<h1>MESSAGES</h1><br><br>	
	    </div>
	    <div class="col">
	      <button class="btn btn-primary">New Message</button>
	    </div>
	  </div>

		<div class="row align-items-start">
	    <div class="col">
	    	{% for room in chatrooms reversed %}

	    	<div>
	    		
		    		<a href="{% url 'view_convo' room.id %}"><h2>Convo with: {{room.circle.name}} </h2></a>
		    			<br>
		    	
	    	</div>
			
				{% endfor %}
	    </div>
	    <div class="col">
	    	<div class="container">
				    <div class="row mt-4">
				        <div class="col">
				            <div class="alert alert-warning text-center">
				            		{% if not p_room_id %}
				            			<h2>No Convo Selected</h2>
				            		{%else%}
										{% for room in chatrooms reversed %}
						            		{% if p_room_id == room.id %}
												<h2>{{ room.circle.name }}</h2>
											{% endif %}
									{% endfor %}
									{%endif%}
				            </div>
				        </div>
				    </div>
				    <div class="row">
				        <div class="col">
				            <div class="overflow-auto border rounded p-3" style="max-height: 300px;">
				            	{% if not p_room_id %}
				            		<div class="alert alert-danger">
				                        <strong>Please Select a Coversation</strong>
				                    </div>
				                {% elif not messages %}
				                    <div class="alert alert-secondary">
				                        <strong>No conversation</strong>
				                    </div>
				                {% else %}
				                    {% for message in messages %}
				                        <div class="alert alert-secondary mb-3">
				                            <strong>Sender: {{ message.sender }}</strong>
				                            <p>{{ message.content|linebreaks }}</p>
				                            <small>{{ message.timestamp }}</small>
				                            <small>{{ message.room.name }}</small>
				                        </div>
				                    {% endfor %}
				                {% endif %}
				            </div>
				        </div>
				    </div>
				    <div class="row mt-3">
				        <div class="col">
								    <form>
								        <div class="input-group">
								            <textarea class="form-control" rows="3" placeholder="Type your message"></textarea>
								            <div class="input-group-append">
								                <button type="submit" class="btn btn-primary">Send</button>
								            </div>
								        </div>
								    </form>
								</div>

				    </div>
				</div>
	
	    </div>
	  </div>


		</div>




{% endblock %}